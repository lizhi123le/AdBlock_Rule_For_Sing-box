name: Delete Old Releases (Keep Latest 3)

on:
  workflow_dispatch:  # 手动触发
  schedule:
    - cron: '0 */6 * * *'  # 每6小时执行一次

jobs:
  delete-old-releases:
    runs-on: ubuntu-latest
    permissions:
      contents: write  # 删除 releases 需要 write 权限

    steps:
      - name: Delete older releases (keep latest 3)
        uses: dev-drprasad/delete-older-releases@v0.3.4
        with:
          keep_latest: 3  # 保留最新的 3 个 releases
          delete_tags: false  # 是否同时删除关联的 tag（默认 false，如果你需要删除 tag 改为 true）
        env:
          GITHUB_TOKEN: ${{ github.token }}  # 使用内置 token 即可
